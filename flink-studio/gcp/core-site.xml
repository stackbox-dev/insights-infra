<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <!-- GCS Configuration -->
    <property>
        <name>fs.gs.impl</name>
        <value>com.google.cloud.hadoop.fs.gcs.GoogleHadoopFileSystem</value>
        <description>The FileSystem for gs: (GCS) uris.</description>
    </property>
    
    <property>
        <name>fs.AbstractFileSystem.gs.impl</name>
        <value>com.google.cloud.hadoop.fs.gcs.GoogleHadoopFS</value>
        <description>The AbstractFileSystem for gs: (GCS) uris.</description>
    </property>
    
    <!-- Authentication Configuration - Using GKE Workload Identity -->
    <property>
        <name>google.cloud.auth.service.account.enable</name>
        <value>false</value>
    </property>
    
    <!-- Use Application Default Credentials (ADC) with Workload Identity -->
    <property>
        <name>fs.gs.auth.type</name>
        <value>APPLICATION_DEFAULT</value>
    </property>
    
    <!-- GCS Performance Configuration -->
    <property>
        <name>fs.gs.block.size</name>
        <value>134217728</value>
        <description>Block size for GCS files (128MB)</description>
    </property>
    
    <property>
        <name>fs.gs.application.name</name>
        <value>flink-gcs-connector</value>
    </property>
    
    <!-- Enable direct upload for better performance -->
    <property>
        <name>fs.gs.outputstream.direct.upload.enable</name>
        <value>true</value>
    </property>
    
    <!-- Buffer size configuration -->
    <property>
        <name>fs.gs.outputstream.buffer.size</name>
        <value>8388608</value>
        <description>Buffer size for GCS output streams (8MB)</description>
    </property>
    
    <!-- Retry configuration -->
    <property>
        <name>fs.gs.http.max.retry</name>
        <value>10</value>
    </property>
    
    <property>
        <name>fs.gs.http.connect-timeout</name>
        <value>60000</value>
    </property>
    
    <property>
        <name>fs.gs.http.read-timeout</name>
        <value>60000</value>
    </property>
</configuration>
